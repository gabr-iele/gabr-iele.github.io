<!DOCTYPE html>
<html>
	<head>
		<title>Accelerometer Example | Generic Sensor API | mobiForge</title>  
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="author" content="Ruadhan O'Donoghue">
		<meta charset="UTF-8">

		<script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.min.js" type="text/javascript"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/crypto-js.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/hmac-sha256.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/enc-base64.min.js"></script>
		<script src="main_cloud.js" defer></script>

	</head>
	<body>

		<h1>Accelerometer raw data</h1>
		<p><a href="https://mobiforge.com/design-development/the-generic-sensor-api">The Generic Sensor API</a> on <a href="https://mobiforge.com">mobiForge.com</a></p>
		<div id="status">No data</div>

		<button id="start">Start</button>
		<button id="stop">Stop</button>

		<script>
			let status = document.getElementById('status');
			if ( 'Accelerometer' in window ) {
				let acl = new Accelerometer({frequency: 1});
				acl.addEventListener('activate', () => console.log('Ready to measure.'));
				acl.addEventListener('error', error => console.log(`Error: ${error.name}`));
				acl.addEventListener('reading', () => {
					status.innerHTML = "x: " + acl.x + "<br>y: " + acl.y + "<br>z: " + acl.z;
				});
				document.getElementById("start").onclick = function() {
					startConnect();
					acl.start()
				};
				document.getElementById("stop").onclick = function() {
					acl.stop();
					startDisconnect();
				};
			}
			else status.innerHTML = 'Accelerometer not supported';
		</script>

	</body>
</html>
